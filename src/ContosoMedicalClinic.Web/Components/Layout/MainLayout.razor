@inherits LayoutComponentBase

<nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top shadow-sm">
    <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="/">
            <i class="bi bi-heart-pulse-fill me-2 fs-4"></i>
            <span class="fw-bold">Contoso Medical Clinic</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item"><a class="nav-link" href="/"><i class="bi bi-house-door me-1"></i>Home</a></li>
                <li class="nav-item"><a class="nav-link" href="/services"><i class="bi bi-clipboard2-pulse me-1"></i>Services</a></li>
                <li class="nav-item"><a class="nav-link" href="/providers"><i class="bi bi-people me-1"></i>Our Providers</a></li>

                <AuthorizeView Roles="Patient">
                    <Authorized>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="bi bi-person me-1"></i>Patient Portal
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/patient/dashboard"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
                                <li><a class="dropdown-item" href="/patient/appointments"><i class="bi bi-calendar-check me-2"></i>My Appointments</a></li>
                                <li><a class="dropdown-item" href="/patient/appointments/book"><i class="bi bi-calendar-plus me-2"></i>Book Appointment</a></li>
                                <li><a class="dropdown-item" href="/patient/visits"><i class="bi bi-journal-medical me-2"></i>Visit History</a></li>
                                <li><a class="dropdown-item" href="/patient/invoices"><i class="bi bi-receipt me-2"></i>My Invoices</a></li>
                            </ul>
                        </li>
                    </Authorized>
                </AuthorizeView>

                <AuthorizeView Roles="Doctor,Staff">
                    <Authorized>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="bi bi-hospital me-1"></i>Staff Portal
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/staff/dashboard"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
                                <li><a class="dropdown-item" href="/staff/calendar"><i class="bi bi-calendar3 me-2"></i>Appointment Calendar</a></li>
                                <li><a class="dropdown-item" href="/staff/patients"><i class="bi bi-person-lines-fill me-2"></i>Patient Records</a></li>
                                <li><a class="dropdown-item" href="/staff/payments"><i class="bi bi-credit-card me-2"></i>Payments</a></li>
                            </ul>
                        </li>
                    </Authorized>
                </AuthorizeView>

                <AuthorizeView Roles="Admin">
                    <Authorized>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="bi bi-gear me-1"></i>Admin
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/admin/dashboard"><i class="bi bi-graph-up me-2"></i>Dashboard</a></li>
                                <li><a class="dropdown-item" href="/admin/staff"><i class="bi bi-person-badge me-2"></i>Staff Roster</a></li>
                                <li><a class="dropdown-item" href="/admin/shifts"><i class="bi bi-clock-history me-2"></i>Shift Management</a></li>
                                <li><a class="dropdown-item" href="/admin/insurance"><i class="bi bi-shield-check me-2"></i>Insurance</a></li>
                                <li><a class="dropdown-item" href="/admin/services"><i class="bi bi-list-check me-2"></i>Service Catalog</a></li>
                            </ul>
                        </li>
                    </Authorized>
                </AuthorizeView>
            </ul>

            <!-- Auth section on the right -->
            <ul class="navbar-nav ms-auto">
                <AuthorizeView>
                    <Authorized>
                        <li class="nav-item d-flex align-items-center">
                            <span class="navbar-text text-white me-2">
                                <i class="bi bi-person-circle me-1"></i>@context.User.Identity?.Name
                                <span class="badge bg-light text-primary ms-1 small">@context.User.FindFirst(System.Security.Claims.ClaimTypes.Role)?.Value</span>
                            </span>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/api/auth/logout"><i class="bi bi-box-arrow-right me-1"></i>Logout</a>
                        </li>
                    </Authorized>
                    <NotAuthorized>
                        <li class="nav-item">
                            <a class="nav-link" href="/login"><i class="bi bi-box-arrow-in-right me-1"></i>Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-light btn-sm ms-2 px-3" href="/register">Register</a>
                        </li>
                    </NotAuthorized>
                </AuthorizeView>
            </ul>
        </div>
    </div>
</nav>

<main class="flex-grow-1">
    @Body
</main>

<footer class="bg-dark text-light py-4 mt-auto">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h6 class="fw-bold"><i class="bi bi-heart-pulse-fill me-2"></i>Contoso Medical Clinic</h6>
                <p class="small text-secondary mb-0">Providing quality healthcare for the whole family.</p>
            </div>
            <div class="col-md-4">
                <h6 class="fw-bold">Contact</h6>
                <p class="small text-secondary mb-0">
                    <i class="bi bi-telephone me-1"></i>(555) 123-4567<br />
                    <i class="bi bi-envelope me-1"></i>info@contosomedical.com<br />
                    <i class="bi bi-geo-alt me-1"></i>123 Health Ave, Medical City, MC 12345
                </p>
            </div>
            <div class="col-md-4 text-md-end">
                <p class="small text-secondary mb-0">&copy; @DateTime.Now.Year Contoso Medical Clinic<br />All rights reserved.</p>
            </div>
        </div>
    </div>
</footer>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>
